<div class="ibox float-e-margins">
  <div class="ibox-title">
    <h5>Attendance Sheet for <%= @section.klass.name %>, Section: <%= @section.name %></h5>
    <div class="ibox-tools">
      <a class="collapse-link">
        <i class="fa fa-chevron-up"></i>
      </a>
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">
        <i class="fa fa-wrench"></i>
      </a>
      <a class="close-link">
        <i class="fa fa-times"></i>
      </a>
    </div>
  </div>
  <div class="ibox-content">
    <div class='row'>
      <%= simple_form_for(@attendance_sheet, url: path) do |f| %>
        <div class="attendance-list m-t-lg">
          <table class="table small">
            <thead>
              <tr>
                <th>Roll Number</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th class='attendance-label'>Attendance</th>
              </tr>
            </thead>
            <tbody>
              <%= f.simple_fields_for :attendances do |attendance| %>
                <tr>
                  <td><%= @students[attendance.object.attendee_id][0] %></td>
                  <td><%= @students[attendance.object.attendee_id][1] %></td>
                  <td><%= @students[attendance.object.attendee_id][2] %></td>
                  <%= attendance.input :attendee_id, as: :hidden, input_html: { value: attendance.object.attendee_id } %>
                  <%= attendance.input :attendee_type, as: :hidden, input_html: { value: attendance.object.attendee_type } %>
                  <td>
                    <%= attendance.input :status, collection: Attendance.statuses.keys.to_a, as: :radio_buttons, item_wrapper_class: 'inline i-checks', label: false %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <%= submit_tag "Mark Attendance", class: "btn btn-md btn-primary m-t-md pull-right" %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<% content_for :javascript do %>
  enable_ichecks();
<% end %>
