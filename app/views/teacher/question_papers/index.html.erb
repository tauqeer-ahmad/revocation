<div class="ibox float-e-margins">
  <div class="ibox-title">
    <div class="ibox-tools">
      <%= button_tag "", type: :button, class: 'btn btn-info btn-outline btn-xs add-paper-modal m-r-md', data: {toggle: "modal", target: "#paper-modal"}{ "Add Question Paper" } %>
      <a class="collapse-link">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>
  </div>
  <div class="ibox-content">
    <div class='assignments-table'>
      <table class='table m-b-xs'>
        <thead>
          <tr>
            <th>#</th>
            <th>Teacher</th>
            <th>Subject</th>
            <th>Class</th>
            <th>Section</th>
            <th>Exam</th>
            <th>Term</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @question_papers.each_with_index do |paper, index| %>
            <tr>
              <td><%= index.succ %></td>
              <td><%= paper.teacher.name %></td>
              <td><%= paper.subject.name %></td>
              <td><%= paper.klass.name %></td>
              <td><%= paper.section.name %></td>
              <td><%= paper.exam.try(:name) %></td>
              <td><%= paper.term.name %></td>
              <td>
                <%= button_tag "", type: :button, class: 'btn btn-info btn-outline btn-xs paper-modal', data: {toggle: "modal", target: "#paper-modal-#{paper.id}"}{ icon_of('fa fa-eye') } %>

                <%= link_to(edit_question_paper_path(paper), class: "btn btn-success btn-outline dim btn-xs", data: { toggle: 'tooltip', placement: 'top' }, title: 'Edit'){ icon_of('fa fa-edit') } %>

                <%= link_to(question_paper_path(paper), class: "btn btn-danger btn-outline dim btn-xs", data: { toggle: 'tooltip', placement: 'top' }, title: 'Delete', method: :delete, confirm: 'Are you sure?'){ icon_of('fa fa-trash-o') } %>
              </td>
            </tr>
            <%= render partial: 'paper_modal', locals: {paper: paper} %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<%= render 'question_paper_modal' %>

<% content_for :javascript do %>
  QuestionPaper.init();
<% end %>
